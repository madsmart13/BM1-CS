<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>هکر لب</title>
  <style>
    /* Hacker theme: green on black, monospace */
    :root{--bg:#020302;--green:#33ff66;--muted:#0f3620;--accent-blue:#7dd3fc}
    html,body{height:100%;margin:0;font-family: "IBM Plex Mono", "Courier New", monospace;background:linear-gradient(180deg,var(--bg),#00110a);color:var(--green)}
    .wrap{max-width:1100px;margin:28px auto;padding:24px;border-radius:10px;background:rgba(0,0,0,0.35);box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    header{display:flex;gap:16px;align-items:center}
    .logo{font-weight:700;font-size:22px;letter-spacing:1px}
    .nav{margin-left:auto;display:flex;gap:10px}
    .btn{background:transparent;border:1px solid rgba(51,255,102,0.12);padding:8px 12px;border-radius:6px;color:var(--green);cursor:pointer}
    .btn:hover{box-shadow:0 0 10px rgba(51,255,102,0.08)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px;margin-top:18px}

    /* Terminal */
    .term{background:#000;border:1px solid rgba(51,255,102,0.06);padding:14px;border-radius:8px;min-height:300px;overflow:auto}
    .term .line{font-size:13px;white-space:pre-wrap}
    .input{display:flex;gap:8px;margin-top:8px}
    .input input{flex:1;background:transparent;border:1px solid rgba(51,255,102,0.06);padding:8px;border-radius:6px;color:var(--green)}

    /* Right column */
    .card{background:linear-gradient(180deg,rgba(0,0,0,0.25),rgba(0,0,0,0.12));padding:14px;border-radius:8px;border:1px solid rgba(51,255,102,0.04)}
    .ip{font-size:20px;margin:8px 0}
    .small{font-size:12px;color:rgba(51,255,102,0.6)}

    /* Matrix background */
    canvas{position:fixed;left:0;top:0;pointer-events:none;z-index:0}
    .wrap, header, .grid, .card, .term{position:relative;z-index:1}

    footer{margin-top:14px;font-size:12px;color:rgba(51,255,102,0.4)}

    /* Neon headings */
    h2{margin:6px 0 12px 0;color:var(--green);text-shadow:0 0 6px rgba(51,255,102,0.06)}

    .muted-box{background:rgba(0,0,0,0.18);padding:8px;border-radius:6px}

    /* small responsive */
    @media(max-width:900px){.grid{grid-template-columns:1fr} .nav{display:none}}
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>
  <div class="wrap">
    <header>
      <div class="logo">H A C K E R • L A B</div>
      <nav class="nav">
        <button class="btn" id="btn-scan">اسکن اطلاعاتی</button>
        <button class="btn" id="btn-ping">پینگ</button>
        <button class="btn" id="btn-fake">ورود امنیتی</button>
        <button class="btn" id="btn-clear">پاک کن</button>
      </nav>
    </header>

    <div class="grid">
      <section>
        <div class="card">
          <h2>ترمینال تعاملی</h2>
          <div class="term" id="terminal" aria-live="polite"></div>
          <div class="input">
            <input id="cmd" placeholder="دستورات: help | ip | scan | ping [host] | دیتا | هاست-اتکر" />
            <button class="btn" id="run">اجرا</button>
          </div>
          <div class="small">این ترمینال نمایشی است — هیچ عملیات مخربی انجام نمی‌دهد.</div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h2>ابزارها</h2>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="btn-theme">تغییر تم</button>
            <button class="btn" id="btn-copy-ip">کپی ای‌پی</button>
            <button class="btn" id="btn-download-log">دانلود لاگ</button>
          </div>
          <div class="small" style="margin-top:8px">ابزارها: نمونه‌های نمایشی برای صفحه GitHub شما.</div>
        </div>
      </section>

      <aside>
        <div class="card">
          <h2>بخش IP</h2>
          <div class="ip" id="visitor-ip">در حال دریافت ای‌پی...</div>
          <div class="small" id="ip-info">ای‌پی و اطلاعات ساده مربوطه</div>
          <div style="height:12px"></div>
          <div class="small">تذکر: برای نمایش دقیق‌تر، اگر سایت را روی HTTPS قرار دهید بهتر کار می‌کند.</div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h2>اسکن اطلاعاتی</h2>
          <div class="small">نمایش یک اسکن نمایشی (بدون نفوذ)</div>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button class="btn" id="btn-run-scan">اجرای اسکن اطلاعاتی</button>
          </div>
          <div style="height:12px"></div>
          <div class="small">بخش URL هدف</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="target-url" placeholder="https://example.com" style="flex:1;background:transparent;border:1px solid rgba(51,255,102,0.06);padding:8px;border-radius:6px;color:var(--green)" />
            <button class="btn" id="btn-load-site">بارگذاری سایت</button>
          </div>
          <div class="muted-box" id="site-info" style="margin-top:10px">اطلاعات سایت: هنوز بارگذاری نشده</div>
        </div>
      </aside>
    </div>

    <footer>برای قرار دادن در GitHub Pages: فایل را داخل ریپو قرار دهید و به Settings → Pages مراجعه کنید.</footer>
  </div>

  <script>
  // matrix background
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d');
  function resize(){canvas.width = innerWidth; canvas.height = innerHeight}
  addEventListener('resize', resize); resize();
  const cols = Math.floor(canvas.width/12);
  let drops = Array(cols).fill(0).map(()=>Math.random()*canvas.height);
  function matrixStep(){
    ctx.fillStyle = 'rgba(0,0,0,0.05)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = 'rgba(51,255,102,0.7)';
    ctx.font = '12px monospace';
    for(let i=0;i<cols;i++){
      const text = String.fromCharCode(0x30A0 + Math.random()*96);
      ctx.fillText(text, i*12, drops[i]);
      drops[i] += 12;
      if(drops[i] > canvas.height && Math.random() > 0.975) drops[i]=0;
    }
    requestAnimationFrame(matrixStep);
  }
  requestAnimationFrame(matrixStep);

  // Terminal: simple interactive
  const term = document.getElementById('terminal');
  const cmdInput = document.getElementById('cmd');
  const runBtn = document.getElementById('run');
  const log = [];
  function writeLine(text){ const el = document.createElement('div'); el.className='line'; el.textContent = text; term.appendChild(el); term.scrollTop = term.scrollHeight; log.push(text); }

  function help(){ writeLine('دستورات قابل قبول: help | ip | scan | ping [host] | دیتا | هاست-اتکر'); }

  function randomCode(){ return Math.random().toString(36).substring(2,10).toUpperCase(); }

  async function doCommand(raw){ const parts = raw.trim().split(/\s+/); const c = parts[0]; if(!c) return; writeLine('> '+raw);
    if(c==='help') help();
    else if(c==='ip'){ writeLine('IP شما: '+(window._detectedIP||'نامشخص')); }
    else if(c==='scan'){ writeLine('در حال اجرای اسکن اطلاعاتی...'); await fakeDelay(); writeLine('پورت 22: باز'); writeLine('پورت 80: باز'); writeLine('پورت 443: باز'); }
    else if(c==='ping'){ const host = parts[1]||'google.com'; writeLine('پینگ به '+host+' ...'); await fakeDelay(); writeLine('avg 17ms'); }
    else if(c==='exploit-fun' || c==='ورود' || c==='ورود-امنیتی' || c==='ورود-امنیتی'){
      writeLine('ورود امنیتی نمایشی اجرا شد — هیچ تغییری صورت نگرفت.');
    }
    else if(c==='دیتا'){
      writeLine('دیتا تولید شد:');
      for(let i=0;i<4;i++) writeLine('CODE-'+randomCode());
    }
    else if(c==='هاست-اتکر' || c==='هاست' || c==='هاستاتکر'){
      if(!window._targetSite){ writeLine('لطفا لینک سایت رو در بخش وارد کنید (سمت راست, URL هدف)'); return; }
      writeLine('هاست ریمور درحال بررسی است...');
      const btn = document.createElement('button'); btn.textContent='اتصال به مخزن'; btn.className='btn'; btn.style.marginTop='8px';
      btn.onclick = async ()=>{
        const code = prompt('کد هاست را وارد کنید:');
        if(code===null) { writeLine('اتصال لغو شد.'); return; }
        if(code==='1234'){
          writeLine('کد صحیح — اتصال برقرار شد. در حال دریافت اطلاعات...');
          await fakeDelay();
          writeLine('--- اطلاعات جمع‌آوری شده ---');
          writeLine('IP: '+(window._detectedIP||'نامشخص'));
          writeLine('User Agent: '+navigator.userAgent);
          writeLine('پلتفرم: '+navigator.platform);
          writeLine('زبان مرورگر: '+navigator.language);
          writeLine('کوکی فعال است؟ '+(navigator.cookieEnabled? 'بله':'خیر'));
          if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition((pos)=>{
              writeLine('مختصات: '+pos.coords.latitude.toFixed(4)+', '+pos.coords.longitude.toFixed(4));
            }, (err)=>{ writeLine('مختصات قابل دسترسی نیست (نیاز به اجازه کاربر).'); });
          }
          writeLine('منبع هدف: '+window._targetSite);
          writeLine('--- پایان ---');
        } else {
          writeLine('کد نادرست — اتصال برقرار نشد.');
        }
      };
      term.appendChild(btn);
      term.scrollTop = term.scrollHeight;
    }
    else writeLine('دستور ناشناخته — برای فهرست: help'); }

  function fakeDelay(){ return new Promise(res=>setTimeout(res,800+Math.random()*900)); }
  runBtn.addEventListener('click', ()=>{ doCommand(cmdInput.value); cmdInput.value=''; cmdInput.focus(); });
  cmdInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ runBtn.click(); }});

  // Buttons
  document.getElementById('btn-clear').addEventListener('click', ()=>{ term.innerHTML=''; writeLine('ترمینال پاک شد.'); });
  document.getElementById('btn-fake').addEventListener('click', ()=>{ doCommand('هاست-اتکر'); });
  document.getElementById('btn-scan').addEventListener('click', ()=>{ doCommand('scan'); });
  document.getElementById('btn-ping').addEventListener('click', ()=>{ doCommand('ping google.com'); });

  // Theme toggle: three themes (main, black-fixed, modern-blue)
  const themeNames = ['main','black-fixed','modern-blue'];
  let themeIndex = 0;
  document.getElementById('btn-theme').addEventListener('click', ()=>{
    themeIndex = (themeIndex+1) % themeNames.length;
    applyTheme(themeNames[themeIndex]);
    writeLine('تم تغییر کرد: '+themeNames[themeIndex]);
  });
  function applyTheme(t){
    if(t==='main'){
      document.body.style.background = 'linear-gradient(180deg,#020302,#00110a)';
      document.body.style.color = 'var(--green)';
      canvas.style.display = 'block';
    } else if(t==='black-fixed'){
      document.body.style.background = '#000000';
      document.body.style.color = 'var(--green)';
      canvas.style.display = 'none';
    } else if(t==='modern-blue'){
      document.body.style.background = 'linear-gradient(180deg,#071738,#001b2e)';
      document.body.style.color = 'var(--accent-blue)';
      canvas.style.display = 'none';
    }
  }

  // IP detection (uses a public API)
  async function fetchIP(){ try{
      // ipify is simple and widely used
      const res = await fetch('https://api.ipify.org?format=json');
      const data = await res.json();
      const ipEl = document.getElementById('visitor-ip');
      window._detectedIP = data.ip;
      ipEl.textContent = data.ip;
      document.getElementById('ip-info').textContent = 'خوش آمدی — ای‌پی شما شناسایی شد.';
      writeLine('ای‌پی بازدیدکننده: '+data.ip);
    }catch(e){ document.getElementById('visitor-ip').textContent='نشده'; document.getElementById('ip-info').textContent='برای دریافت ای‌پی نیاز به اینترنت و HTTPS است.'; writeLine('خطا در دریافت ای‌پی: '+e.message); }
  }
  fetchIP();

  // Copy IP
  document.getElementById('btn-copy-ip').addEventListener('click', async ()=>{
    const ip = window._detectedIP || '';
    if(!ip) { writeLine('هیچ ای‌پی‌ای در دسترس نیست.'); return; }
    await navigator.clipboard.writeText(ip);
    writeLine('ای‌پی در کلیپ بورد کپی شد: '+ip);
  });

  // Download log
  document.getElementById('btn-download-log').addEventListener('click', ()=>{
    const data = log.join('\n');
    const blob = new Blob([data], {type:'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'hackerlab-log.txt'; a.click(); URL.revokeObjectURL(url);
    writeLine('لاگ دانلود شد.');
  });

  // Fake scan action
  document.getElementById('btn-run-scan').addEventListener('click', async ()=>{
    writeLine('شروع اسکن اطلاعاتی...');
    const items = ['192.168.1.1','192.168.1.5','192.168.1.18','example.com'];
    for(const i of items){ await fakeDelay(); writeLine('پاسخ از '+i+' — پورت 80 باز'); }
    writeLine('اسکن تمام شد.');
  });

  // Load target site button
  document.getElementById('btn-load-site').addEventListener('click', async ()=>{
    const url = document.getElementById('target-url').value.trim();
    if(!url){ document.getElementById('site-info').textContent = 'لطفا یک لینک وارد کنید.'; return; }
    window._targetSite = url;
    document.getElementById('site-info').textContent = 'در حال واکشی اطلاعات برای: '+url;
    try{
      // Attempt to fetch headers (may be blocked by CORS) — we only attempt for demo
      const res = await fetch(url, {method:'GET'});
      const info = [];
      info.push('Status: '+res.status+' '+res.statusText);
      info.push('Content-Type: '+(res.headers.get('content-type')||'نامشخص'));
      info.push('Server: '+(res.headers.get('server')||'نامشخص'));
      document.getElementById('site-info').innerHTML = info.join('<br>');
      writeLine('اطلاعات سایت برای '+url+' بارگذاری شد.');
    }catch(e){
      document.getElementById('site-info').textContent = 'خطا: امکان واکشی سرور به دلیل CORS یا محدودیت شبکه وجود دارد. اما آدرس ذخیره شد.';
      writeLine('خطا در واکشی سایت (احتمال CORS): '+e.message);
    }
  });

  // Small Easter egg: Konami-like sequence to toggle "super mode"
  const seq = [];
  addEventListener('keydown',(e)=>{ seq.push(e.key.toLowerCase()); if(seq.join('').includes('iddqd')){ document.body.style.filter='hue-rotate(120deg)'; writeLine('SUPER MODE فعال شد'); seq.length=0; } if(seq.length>20) seq.shift(); });

  </script>
  <!-- START: safe-notepad-sim -->
<style>
/* سبک ساده برای مودال نوت‌پدِ نمایشی */
#pn_modal_overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:9999; }
#pn_notepad { width:720px; max-width:95%; height:420px; background:#fff; color:#000; border-radius:6px; box-shadow:0 12px 40px rgba(0,0,0,0.6); font-family: 'Segoe UI', Tahoma, sans-serif; display:flex; flex-direction:column; overflow:hidden; }
#pn_header { background:linear-gradient(180deg,#e9eef2,#dfe7eb); padding:8px 12px; display:flex; align-items:center; gap:8px; border-bottom:1px solid rgba(0,0,0,0.06); }
#pn_title { font-weight:600; font-size:14px; color:#111; }
#pn_close { margin-left:auto; background:transparent;border:0;font-size:18px;cursor:pointer; }
#pn_body { padding:12px; flex:1; display:flex; flex-direction:column; }
#pn_textarea { flex:1; width:100%; resize:none; border:1px solid #ccc; padding:10px; border-radius:4px; font-family: 'Consolas', monospace; font-size:14px; line-height:1.45; }
#pn_actions { display:flex; gap:8px; padding:10px; justify-content:flex-end; border-top:1px solid rgba(0,0,0,0.04); background:#fbfcfd; }
.pn_btn { padding:8px 12px; border-radius:6px; border:1px solid rgba(0,0,0,0.08); background:transparent; cursor:pointer; }
</style>

<!-- دکمهٔ محرک (قرار بده نزدیک دیگر دکمه‌هایت) -->
<button class="btn" id="pn_open_btn" style="margin-left:8px;">باز کردن نوت‌پد (نمایشی)</button>

<!-- مودال نمایشی نوت‌پد -->
<div id="pn_modal_overlay" aria-hidden="true">
  <div id="pn_notepad" role="dialog" aria-modal="true" aria-label="Notepad - شبیه‌ساز">
    <div id="pn_header">
      <div id="pn_title">Notepad — شبیه‌ساز</div>
      <button id="pn_close" title="بستن">✕</button>
    </div>
    <div id="pn_body">
      <textarea id="pn_textarea" spellcheck="false">
کد ورود و احراز شما در دسترس دیگران قرار ندهید F#hj232132h4iu
      </textarea>
    </div>
    <div id="pn_actions">
      <button class="pn_btn" id="pn_download">دانلود به‌عنوان .txt</button>
      <button class="pn_btn" id="pn_copy">کپی به کلیپ‌بورد</button>
      <button class="pn_btn" id="pn_close2">بستن</button>
    </div>
  </div>
</div>

<script>
/* JS مستقل و با نام‌های مشخص تا تداخل ایجاد نشود */
(() => {
  const openBtn = document.getElementById('pn_open_btn');
  const overlay = document.getElementById('pn_modal_overlay');
  const closeBtns = [document.getElementById('pn_close'), document.getElementById('pn_close2')];
  const textarea = document.getElementById('pn_textarea');
  const downloadBtn = document.getElementById('pn_download');
  const copyBtn = document.getElementById('pn_copy');

  // متن آماده (در صورت نیاز قابل تغییر)
  const defaultText = 'کد ورود و احراز شما در دسترس دیگران قرار ندهید F#hj232132h4iu';
  // فقط اگر textarea خالی باشد متن پیش‌فرض را قرار بده
  if (!textarea.value || textarea.value.trim().length === 0) textarea.value = defaultText;

  function showModal(){
    overlay.style.display = 'flex';
    overlay.setAttribute('aria-hidden','false');
    // فوکوس در textarea برای احساسی واقعی
    setTimeout(()=> textarea.focus(), 80);
  }
  function hideModal(){
    overlay.style.display = 'none';
    overlay.setAttribute('aria-hidden','true');
  }

  openBtn.addEventListener('click', (e) => {
    e.preventDefault();
    showModal();
  });

  closeBtns.forEach(b => b.addEventListener('click', hideModal));
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) hideModal();
  });

  // دانلود فایل .txt با متن فعلی
  downloadBtn.addEventListener('click', () => {
    const text = textarea.value.replace(/\r\n/g, '\n');
    const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    // نام فایل دلخواه:
    a.download = 'note.txt';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  // کپی به کلیپ‌بورد (در صورت پشتیبانی)
  copyBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(textarea.value);
      // پیغام داخل کنسول و ترمینال نمایشی (اگر وجود دارد)
      console.log('Copied to clipboard');
      // اگر ترمینال نمایشی صفحه وجود داشته باشد، نوشته می‌کنیم (غیرحتمی و بدون خطا اگر وجود نداشت)
      try { if (typeof writeLine === 'function') writeLine('متن در کلیپ‌بورد کپی شد.'); } catch(e){}
    } catch (err) {
      alert('کپی از کلیپ‌بورد پشتیبانی نمی‌شود.');
    }
  });

  // جلوگیری از تداخل: این ماژول هیچ متغیر/تابع گلوبالی ثبت نمی‌کند به جز عنصرهای DOM که استفاده‌شان اختیاری است.
})();
</script>
<!-- END: safe-notepad-sim -->

</body>
</html>
